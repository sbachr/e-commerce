<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <title>Jajan In</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU"
        crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <style>
        #bodycenter {
        margin-top: 50px
    }
    </style>

</head>

<body class="d-flex flex-column">

    <body class="d-flex flex-column">
        <div id="app">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
                <div class="container flex-grow-1">
                    <a class="navbar-brand" href="http://localhost:8080">Jajan-In</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarResponsive">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" data-toggle="modal" data-target="#cartModal"><i class="fas fa-shopping-cart"></i></a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" data-toggle="modal" data-target="#profileModal"><i class="fas fa-user"></i></i></a>
                            </li>

                            <li class="nav-item" v-if="isLogin">
                                <a class="nav-link" data-toggle="modal" data-target="#loginModal">Login</a>
                                <a class="nav-link" data-toggle="modal" data-target="#registerModal">Register</a>

                            </li>

                            <!-- <li class="nav-item">
                                <a class="nav-link" data-toggle="modal" data-target="#registerModal">Register</a>
                            </li> -->

                            <li class="nav-item" v-else>
                                <a class="nav-link" id="logout">Logout</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <div class="container" id="bodycenter">

                <div class="row">

                    <div class="col-lg-3">

                        <h1 class="my-4" id="listCategory">Kategori</h1>
                        <div class="list-group" v-for="dataItem in dataItems">
                            <a href="#" class="list-group-item">{{dataItem.category}}</a>
                        </div>

                    </div>

                    <!-- items -->
                    <div class="col-lg-9 mt-5">

                        <div class="row col-4">
                            <input class="form-control py-2" type="search" placeholder="Search...." id="search">
                        </div>

                        <div class="row mt-2" id="listItem">

                            <div class="col-lg-4 col-md-6 mb-4" v-for="item in items">
                                <div class="card h-100">
                                    <a href="#" data-toggle="modal" data-target="#itemModal"><img class="card-img-top"
                                            src="http://placehold.it/500x400" alt=""></a>
                                    <div class="card-body">
                                        <h4 class="card-title">
                                            <a href="#" data-toggle="modal" data-target="#itemModal">{{item.item}}</a>
                                        </h4>
                                        <hr>
                                        <h6>Description : {{item.description}}</h6>
                                        <hr>
                                        <h5>{{item.price}}</h5>

                                    </div>

                                </div>
                            </div>

                        </div>
                        <!-- /.row -->
                    </div>
                    <!-- /.col-lg-9 -->

                    <footer class="py-3 bg-dark fixed-bottom">
                        <div class="container">
                            <p class="m-0 text-center text-white">Copyright &copy; 2018</p>
                        </div>
                    </footer>

                    <!-- Modal Cart -->
                    <div class="modal fade" id="cartModal">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title"><i class="fas fa-shopping-cart"></i> Keranjang</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">

                                    <div class="container">
                                        <table class="table table-hover">
                                            <tbody>

                                                <tr>
                                                    <td>
                                                        <img class="card-img-top" src="http://placehold.it/30x30" alt="">
                                                    </td>
                                                    <td>Ovomaltine</td>
                                                    <td>
                                                        <input type="text" class="form-control col-2" name="total"
                                                            value="1">
                                                    </td>
                                                    <td>Rp. 60.000</td>
                                                    <td><button type="button" class="close">&times;</button></td>
                                                </tr>

                                                <tr>
                                                    <td>
                                                        <img class="card-img-top" src="http://placehold.it/30x30" alt="">
                                                    </td>
                                                    <td>Ovomaltine</td>
                                                    <td>
                                                        <input type="text" class="form-control col-2" name="total"
                                                            value="1">
                                                    </td>
                                                    <td>Rp. 60.000</td>
                                                    <td><button type="button" class="close">&times;</button></td>
                                                </tr>

                                            </tbody>
                                        </table>
                                    </div>

                                </div>

                                <!-- Modal footer -->
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Checkout</button>
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Modal Profile -->
                    <div class="modal fade" id="profileModal">
                        <div class="modal-dialog">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title"><i class="fas fa-user"></i> Profile</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">

                                    <div class="container">

                                        <img class="rounded mx-auto d-block" src="http://placehold.it/200x200" alt="">
                                        <form>
                                            <div class="form-group">
                                                <label for="name">Name:</label>
                                                <input type="name" class="form-control" autocomplete="off">
                                            </div>
                                            <div class="form-group">
                                                <label for="email">Email address:</label>
                                                <input type="email" class="form-control" disabled>
                                            </div>
                                            <div class="form-group">
                                                <label for="pwd">Password:</label>
                                                <input type="password" class="form-control">
                                            </div>

                                        </form>

                                    </div>

                                </div>

                                <!-- Modal footer -->
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Save</button>
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Modal Item -->
                    <div class="modal fade" id="itemModal">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title">Ovomaltine</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">

                                    <table class="table table-hover">
                                        <tbody>

                                            <tr>
                                                <td>
                                                    <img class="float-left" src="http://placehold.it/200x200" alt="">
                                                </td>
                                                <td>
                                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam urna
                                                    sem,
                                                    suscipit eget ultrices id, molestie sed
                                                    felis. Aenean interdum cursus dolor ut posuere. Nam varius volutpat
                                                    odio,
                                                    quis aliquet nunc luctus eget.
                                                    Nullam aliquet justo ut nisi dapibus, non eleifend felis facilisis.
                                                    Vivamus
                                                    tristique non ipsum quis laoreet.
                                                    Suspendisse.
                                                </td>
                                                <td>Rp. 60.000</td>
                                            </tr>

                                        </tbody>
                                    </table>

                                </div>

                                <!-- Modal footer -->
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Tambahkan ke
                                        keranjang</button>
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Modal Login -->
                    <div class="modal fade" id="loginModal">
                        <div class="modal-dialog">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title"><i class="fas fa-user"></i> Login</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">

                                    <div class="container">

                                        <form action="#" method="POST">
                                            <div class="form-group">
                                                <label for="email">Email address:</label>
                                                <input type="email" class="form-control" id="email" v-model='email'>
                                            </div>
                                            <div class="form-group">
                                                <label for="password" >Password:</label>
                                                <input type="password" class="form-control" id="password" v-model=password> 
                                            </div>

                                            <div class="form-group">
                                                <label for="other">Or</label>
                                                <hr class="mt-0">
                                                <button type="button" class="btn" name="button">Facebook</button>
                                            </div>
                                        </form>

                                    </div>

                                </div>

                                <!-- Modal footer -->
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal" v-on:click="getLogin">Login</button>
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--  -->

                    <!-- modal register  -->
                    <div class="modal fade" id="registerModal">
                        <div class="modal-dialog">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title"><i class="fas fa-user"></i> Sign up</h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">

                                    <div class="container">

                                        <form action="#" method="POST">
                                            <div class="form-group">
                                                <label for="username">Username:</label>
                                                <input type="text" class="form-control" id="username" v-model="username">
                                            </div>
                                            <div class="form-group">
                                                <label for="email">Email address:</label>
                                                <input type="email" class="form-control" id="emailRegister" v-model="email">
                                            </div>
                                            <div class="form-group">
                                                <label for="pwd">Password:</label>
                                                <input type="password" class="form-control" id="passwordRegister" v-model="password">
                                            </div>

                                            <div class="form-group">
                                                <label for="other">Or Sign up with: </label>
                                                <hr class="mt-0">
                                                <button type="button" class="btn" name="button" id="facebook">Facebook</button>
                                                <button type="button" class="btn" name="button" id="google">Google</button>
                                            </div>
                                        </form>

                                    </div>

                                </div>

                                <!-- Modal footer -->
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal" v-on:click="getRegister">register</button>
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!--  -->

                </div>
            </div>
        </div>

        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>

        <script>

            const url = 'http://localhost:3000'
            const app = new Vue({
                el: '#app',
                mounted() {
                    // this.getItem()
                    // this.getCategory()
                    this.getLogin()
                    this.getRegister()
                },
                data() {
                    return {
                        items: [],
                        // isRegister: false,
                        isLogin: false,
                        username: '',
                        email: '',
                        password: '',
                        token : '',
                        // search: '',
                        dataItems: [],
                        // products: [],
                        // cart: [],
                        // checkout: [],
                        user: {
                            name: 'Unknown',
                            email: 'Unknown'
                        }
                    }
                },
                methods: {

                    // getItem() {
                    //     axios.get(`${url}/items`)
                    //         .then(response => {
                    //             this.items = response.data.data
                    //             console.log(response.data.data)
                    //         })
                    //         .catch(err => {
                    //             this.items = []
                    //         })
                    // },

                    // getCategory() {
                    //     axios.get(`${url}/category`)
                    //         .then(response => {
                    //             this.dataItems = response.data.data
                    //             console.log(response)
                    //         })
                    //         .catch(err => {
                    //             this.dataItems = []
                    //         })
                    // },

                    getLogin() {
                        console.log(localStorage.getItem('token'), "testing")
                        if (this.username != '') {
                            let where = {
                                email: this.email,
                                password: this.password
                            }
                            axios.post('http://localhost:3000/users/login', where)
                                .then(response => {
                                 console.log(response)
                                    localStorage.setItem('token', response.data.token)
                                    this.isLogin = true
                                    window.location = '/index.html'
                                    console.log(localStorage.setItem('token', response.data.token));
                                })
                        }
                    },

                    getRegister() {
                        let data = {
                            username: this.username,
                            email: this.email,
                            password: this.password
                        }

                        axios.post('http://localhost:3000/users/register', data)
                            .then(response => {
                                this.user = response.data.data
                            })
                            .catch(err => {
                                this.user = []
                            })
                    }
                },



            })

        </script>
    </body>

</html>